Fri Feb 04 2016

Alternate boot loader project.


This branch of illumos-gate fork adds an system-boot-loader package
with boot loader ported from FreeBSD.

The loader support files are installed to BE /boot directory.

Currently supported setup is GPT labeled disk based boot
(pmbr+gptzfsboot+zfsloader) and pxeboot for network boot.

For disk based boot the loader expects pool to have bootfs set (beadm activate
or zpool set bootfs=...), and assumes 512B sector size disk(s). Once loaded,
the loader will read /boot/loader.rc and other files included from loader.rc.

PXE boot assumes boot directory in tftp server, providing the same support
files as disk based boot, except the initial script is /boot/pxeboot.rc - the
loader.rc can be renamed for most cases. I have only tested smartos with pxe
boot.

To install boot blocks, use installboot command:
	installboot [flags] /boot/pmbr /boot/gptzfsboot /dev/rdsk/cXtYd0sZ

To list and switch boot environments, the beadm command in loader is using
file pool/boot/menu.lst and it should have following two lines for every
BE (updated by libbe):

title bename
bootfs pool/ROOT/bename

